var sortable=function(){"use strict";function f(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}function u(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter(function(e){return 1===e.nodeType&&e.matches(t)})}var m=new Map,t=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var n={};return this._config.forEach(function(e,t){n[t]=e}),n},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}();function p(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return m.has(e)||m.set(e,new t),m.get(e)}function h(e,t,n){if(e instanceof Array)for(var a=0;a<e.length;++a)h(e[a],t,n);else e.addEventListener(t,n),p(e).setData("event"+t,n)}function l(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)l(e[n],t);else e.removeEventListener(t,p(e).getData("event"+t)),p(e).deleteData("event"+t)}function g(e,t,n){if(e instanceof Array)for(var a=0;a<e.length;++a)g(e[a],t,n);else e.setAttribute(t,n)}function d(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)d(e[n],t);else e.removeAttribute(t)}function v(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.scrollX,right:t.right+window.scrollX,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}function b(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)}function y(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode}var n=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},w=function(e,t){return n(e,t,"before")},$=function(e,t){return n(e,t,"after")};function E(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var n=window.getComputedStyle(e);return["height","padding-top","padding-bottom"].map(function(e){var t=parseInt(n.getPropertyValue(e),10);return isNaN(t)?0:t}).reduce(function(e,t){return e+t})}function s(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter(function(e){return e.querySelector(t)instanceof HTMLElement}).map(function(e){return e.querySelector(t)})}var k=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}};function _(e,t){if(!0===e.isSortable){var n=p(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&0<n.split(",").filter(function(e){return 0<e.length&&t.matches(e)}).length;if(e===t)return!0;if(void 0!==p(e).getConfig("connectWith")&&null!==p(e).getConfig("connectWith"))return p(e).getConfig("connectWith")===p(t).getConfig("connectWith")}return!1}var C,T,I,x,L,M,D,B={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};function A(e,t){if("string"==typeof p(e).getConfig("hoverClass")){var r=p(e).getConfig("hoverClass").split(" ");!0===t?(h(e,"mousemove",function(a,r){var i=this;if(void 0===r&&(r=250),"function"!=typeof a)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof r)throw new Error("You must provide a number as the second argument for throttle.");var o=null;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Date.now();(null===o||r<=n-o)&&(o=n,a.apply(i,e))}}(function(a){0===a.buttons&&u(e.children,p(e).getConfig("items")).forEach(function(e){var t,n;e!==a.target?(t=e.classList).remove.apply(t,r):(n=e.classList).add.apply(n,r)})},p(e).getConfig("throttleTime"))),h(e,"mouseleave",function(){u(e.children,p(e).getConfig("items")).forEach(function(e){var t;(t=e.classList).remove.apply(t,r)})})):(l(e,"mousemove"),l(e,"mouseleave"))}}var c=function(e){l(e,"dragstart"),l(e,"dragend"),l(e,"dragover"),l(e,"dragenter"),l(e,"drop"),l(e,"mouseenter"),l(e,"mouseleave")},N=function(e,t){var n=e;return!0===p(t).getConfig("copy")&&(g(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n};function H(e){for(;!0!==e.isSortable;)e=e.parentElement;return e}function S(e,t){var n=f(e,"opts"),a=u(e.children,n.items).filter(function(e){return e.contains(t)});return 0<a.length?a[0]:t}var a=function(e){var t,n,a,r=f(e,"opts")||{},i=u(e.children,r.items),o=s(i,r.handle);l(e,"dragover"),l(e,"dragenter"),l(e,"drop"),(n=t=e).h5s&&delete n.h5s.data,d(t,"aria-dropeffect"),l(o,"mousedown"),c(i),d(a=i,"aria-grabbed"),d(a,"aria-copied"),d(a,"draggable"),d(a,"role")},F=function(e){var t=f(e,"opts"),n=u(e.children,t.items),a=s(n,t.handle);(g(e,"aria-dropeffect","move"),f(e,"_disabled","false"),g(a,"draggable","true"),!1===t.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&h(a,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}}))},Y=function(e){var t=f(e,"opts"),n=u(e.children,t.items),a=s(n,t.handle);f(e,"_disabled","false"),c(n),l(a,"mousedown"),l(e,"dragover"),l(e,"dragenter"),l(e,"drop")};function z(e,c){var s=String(c);return c=Object.assign({connectWith:null,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,items:null},"object"==typeof c?c:{}),"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(s)?e.map(function(e){var t=f(e,"opts");return function(t,n,e){if(void 0===n&&(n=function(e,t){return e}),void 0===e&&(e=function(e){return e}),!(t instanceof HTMLElement)||1==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof n||"function"!=typeof e)throw new Error("You need to provide a valid serializer for items and the container.");var a=f(t,"opts").items,r=u(t.children,a),i=r.map(function(e){return{parent:t,node:e,html:e.outerHTML,index:b(e,r)}});return{container:e({node:t,itemCount:i.length}),items:i.map(function(e){return n(e,t)})}}(e,t.itemSerializer,t.containerSerializer)}):(e.forEach(function(d){if(/enable|disable|destroy/.test(s))return z[s](d);["connectWith","disableIEFix"].forEach(function(e){c.hasOwnProperty(e)&&null!==c[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}),c=Object.assign({},B,c),p(d).config=c,c=f(d,"opts")||c,f(d,"opts",c),d.isSortable=!0,Y(d);var e,t=u(d.children,c.items);if(null!==c.placeholder&&void 0!==c.placeholder){var n=document.createElement(d.tagName);n.innerHTML=c.placeholder,e=n.children[0]}p(d).placeholder=function(e,t,n){if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(a=t.classList).add.apply(a,n.split(" ")),t;var a}(d,e,c.placeholderClass),f(d,"items",c.items),c.acceptFrom?f(d,"acceptFrom",c.acceptFrom):c.connectWith&&f(d,"connectWith",c.connectWith),F(d),g(t,"role","option"),g(t,"aria-grabbed","false"),A(d,!0),h(d,"dragstart",function(e){if(!0!==e.target.isSortable&&(e.stopImmediatePropagation(),(!c.handle||e.target.matches(c.handle))&&"false"!==e.target.getAttribute("draggable"))){var t=H(e.target),n=S(t,e.target);M=u(t.children,c.items),x=M.indexOf(n),L=b(n,t.children),I=t,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=k),e.dataTransfer&&e.dataTransfer.setDragImage){var a=n(t,v(t),e);if(!(a.element instanceof HTMLElement)||"number"!=typeof a.posX||"number"!=typeof a.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain","arbitrary"),e.dataTransfer.setDragImage(a.element,a.posX,a.posY)}}(e,n,c.customDragImage),T=E(n),n.classList.add(c.draggingClass),g(C=N(n,t),"aria-grabbed","true"),t.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:L,index:x,container:I},item:C}}))}}),h(d,"dragenter",function(e){if(!0!==e.target.isSortable){var t=H(e.target);D=u(t.children,f(t,"items")).filter(function(e){return e!==p(d).placeholder})}}),h(d,"dragend",function(e){if(C){C.classList.remove(c.draggingClass),g(C,"aria-grabbed","false"),"true"===C.getAttribute("aria-copied")&&"true"!==f(C,"dropped")&&C.remove(),C.style.display=C.oldDisplay,delete C.oldDisplay;var t=Array.from(m.values()).map(function(e){return e.placeholder}).filter(function(e){return e instanceof HTMLElement}).filter(y)[0];t&&t.remove(),d.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:L,index:x,container:I},item:C}})),T=C=null}}),h(d,"drop",function(e){if(_(d,C.parentElement)){e.preventDefault(),e.stopPropagation(),f(C,"dropped","true");var t=Array.from(m.values()).map(function(e){return e.placeholder}).filter(function(e){return e instanceof HTMLElement}).filter(y)[0];$(t,C),t.remove(),d.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:L,index:x,container:I},item:C}}));var n=p(d).placeholder,a=u(I.children,c.items).filter(function(e){return e!==n}),r=!0===this.isSortable?this:this.parentElement,i=u(r.children,f(r,"items")).filter(function(e){return e!==n}),o=b(C,Array.from(C.parentElement.children).filter(function(e){return e!==n})),l=b(C,i);L===o&&I===r||d.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:L,index:x,container:I,itemsBeforeUpdate:M,items:a},destination:{index:l,elementIndex:o,container:r,itemsBeforeUpdate:D,items:i},item:C}}))}});var a,r,i,o=(a=function(t,e,n){if(C)if(c.forcePlaceholderSize&&(p(t).placeholder.style.height=T+"px"),-1<Array.from(t.children).indexOf(e)){var a=E(e),r=b(p(t).placeholder,e.parentElement.children),i=b(e,e.parentElement.children);if(T<a){var o=a-T,l=v(e).top;if(r<i&&n<l)return;if(i<r&&l+a-o<n)return}void 0===C.oldDisplay&&(C.oldDisplay=C.style.display),"none"!==C.style.display&&(C.style.display="none");var d=!1;try{d=v(e).top+e.offsetHeight/2<=n}catch(e){d=r<i}d?$(e,p(t).placeholder):w(e,p(t).placeholder),Array.from(m.values()).filter(function(e){return void 0!==e.placeholder}).forEach(function(e){e.placeholder!==p(t).placeholder&&e.placeholder.remove()})}else{var s=Array.from(m.values()).filter(function(e){return void 0!==e.placeholder}).map(function(e){return e.placeholder});-1!==s.indexOf(e)||t!==e||u(e.children,c.items).length||(s.forEach(function(e){return e.remove()}),e.appendChild(p(t).placeholder))}},void 0===(r=c.debounce)&&(r=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];clearTimeout(i),i=setTimeout(function(){a.apply(void 0,e)},r)}),l=function(e){var t=e.target,n=!0===t.isSortable?t:H(t);if(t=S(n,t),C&&_(n,C.parentElement)&&"true"!==f(n,"_disabled")){var a=f(n,"opts");parseInt(a.maxItems)&&u(n.children,f(n,"items")).length>=parseInt(a.maxItems)&&C.parentElement!==n||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===p(n).getConfig("copy")?"copy":"move",o(n,t,e.pageY))}};h(t.concat(d),"dragover",l),h(t.concat(d),"dragenter",l)}),e)}return z.destroy=function(e){a(e)},z.enable=function(e){F(e)},z.disable=function(e){var t,n,a;n=f(t=e,"opts"),a=s(u(t.children,n.items),n.handle),g(t,"aria-dropeffect","none"),f(t,"_disabled","true"),g(a,"draggable","false"),l(a,"mousedown")},z}();"undefined"==typeof piranha&&(piranha={}),piranha.blocks=new function(){"use strict";var r=this;r.init=function(){sortable(".block-types",{items:":not(.unsortable)",acceptFrom:!1,copy:!0});for(var e=sortable(".blocks",{handle:".sortable-handle",items:":not(.unsortable)",acceptFrom:".blocks,.block-types"}),t=sortable(".block-group-list .list-group",{items:":not(.unsortable)",acceptFrom:".block-group-list .list-group,.block-types"}),n=0;n<t.length;n++)t[n].addEventListener("sortupdate",function(e){var t=e.detail.destination.index,n=$("#"+$(e.detail.item).attr("data-id"));$(n).detach();var a=$(e.detail.item).closest(".block-group").find(".block-group-item");0<t?$(n).insertAfter(a.get(t-1)):$(n).insertBefore(a.get(0)),r.recalcBlocks()});e[0].addEventListener("sortupdate",function(t){var e=t.detail.item;$(e).hasClass("block-type")?$.ajax({url:piranha.baseUrl+"manager/block/create",method:"POST",contentType:"application/json",dataType:"html",data:JSON.stringify({Type:$(e).data("typename"),Index:t.detail.destination.index}),success:function(e){$(".blocks .block-type").remove(),$(e).insertBefore($(".blocks .block").get(t.detail.destination.index));$(e).find(".block-editor").each(function(){addInlineEditor("#"+this.id)});sortable(".blocks",{handle:".sortable-handle",items:":not(.unsortable)",acceptFrom:".blocks,.block-types"}),$(".blocks .loading").removeClass("loading"),r.recalcBlocks()}}):r.recalcBlocks()})},r.removeBlock=function(e){e.remove(),r.recalcBlocks()},r.recalcBlocks=function(){for(var e=$(".body-content .blocks > .block"),n=0;n<e.length;n++){var t=$(e.get(n)).find("input, textarea, select");t.attr("id",function(e,t){return t?t.replace(/Blocks_\d+__/,"Blocks_"+n+"__"):t}),t.attr("name",function(e,t){return t?t.replace(/Blocks\[\d+\]/,"Blocks["+n+"]"):t}),$(e.get(n)).find("[contenteditable=true]").attr("data-id",function(e,t){return t?t.replace(/Blocks_\d+__/,"Blocks_"+n+"__"):t}),$(e.get(n)).find("button").attr("data-mediaid",function(e,t){return t?t.replace(/Blocks_\d+__/,"Blocks_"+n+"__"):t});for(var a=$(e.get(n)).find(".block-group-item"),r=0;r<a.length;r++){var i=$(a.get(r)).find("input, textarea, select");i.attr("id",function(e,t){return t?t.replace(/Blocks_\d+__Items_\d+__/,"Blocks_"+n+"__Items_"+r+"__"):t}),i.attr("name",function(e,t){return t?t.replace(/Blocks\[\d+\].Items\[\d+\]/,"Blocks["+n+"].Items["+r+"]"):t}),$(a.get(r)).find("[contenteditable=true]").attr("data-id",function(e,t){return t?t.replace(/Blocks_\d+__Items_\d+__/,"Blocks_"+n+"__Items_"+r+"__"):t}),$(a.get(r)).find("button").attr("data-mediaid",function(e,t){return t?t.replace(/Blocks_\d+__Items_\d+__/,"Blocks_"+n+"__Items_"+r+"__"):t})}}},$(document).on("click",".block-remove",function(e){e.preventDefault(),r.removeBlock($(this).closest(".block"))}),$(document).on("focus",".block .empty",function(){$(this).removeClass("empty"),$(this).addClass("check-empty")}),$(document).on("blur",".block .check-empty",function(){piranha.tools.isEmpty(this)&&($(this).removeClass("check-empty"),$(this).addClass("empty"))}),$(document).on("click",".block-group-list .list-group a",function(e){e.preventDefault(),$(this).parent().find(".list-group-item").removeClass("active"),$(this).addClass("active"),$(this).closest(".block-group").find(".block-group-item:not(.d-none)").addClass("d-none"),$("#"+$(this).attr("data-id")).removeClass("d-none")})},"undefined"==typeof piranha&&(piranha={}),piranha.media=new function(){"use strict";var n=this;n.mediaId="",n.mediaName="",n.mediaUrlId="",n.mediaFilter="",n.currentFolder="",n.callback=null,n.initCallback=null,n.init=function(e){n.mediaId=e.attr("data-mediaid"),n.mediaName=e.data("medianame"),n.mediaUrlId=e.data("mediaurlid"),n.mediaFilter=e.data("filter")},n.show=function(e){$(".panel-media").addClass("active")},n.hide=function(e){$(".panel-media").removeClass("active")},n.load=function(e,t){$.ajax({url:piranha.baseUrl+"manager/media/panel/"+t+"?filter="+n.mediaFilter,success:function(e){$(".panel-media .panel-body").html(e),n.currentFolder=t,n.bindDropzone()}})},n.reload=function(e){n.load(e,n.currentFolder)},n.set=function(e){if(n.callback)n.callback({id:e.data("id"),name:e.data("name"),url:e.data("url")}),n.callback=null;else{if(n.mediaId&&$("#"+n.mediaId).val(e.data("id")),$("#"+n.mediaName).text(e.data("name")),n.mediaUrlId){var t=$("#"+n.mediaUrlId);"IMG"==t.prop("tagName")?t.attr("src",e.data("url")):t.val(e.data("url"))}$("#"+n.mediaName).data("filename",e.data("name")),$("#"+n.mediaName).data("url",e.data("url")),$("#"+n.mediaName).data("contenttype",e.data("contenttype")),$("#"+n.mediaName).data("filesize",e.data("filesize")),$("#"+n.mediaName).data("modified",e.data("modified"))}},n.remove=function(e){if($("#"+n.mediaId).val(""),$("#"+n.mediaName).html("&nbsp;"),$("#"+n.mediaName).data("filename",""),$("#"+n.mediaName).data("url",""),$("#"+n.mediaName).data("contenttype",""),$("#"+n.mediaName).data("filesize",""),$("#"+n.mediaName).data("modified",""),n.mediaUrlId){var t=$("#"+n.mediaUrlId);"IMG"==t.prop("tagName")&&t.attr("src","/manager/assets/img/block-img-placeholder.png")}},n.bindDropzone=function(){$("#dropzonemodal").dropzone({paramName:"Uploads",url:"/manager/media/panel/add",uploadMultiple:!0,init:function(){this.on("queuecomplete",function(e){piranha.media.reload()})}})}},$(document).on("click","#modalMedia .modal-body a",function(){var e=$(this);return"folder"==e.data("type")?piranha.media.load(e,e.data("folderid"),e.data("filter")):(piranha.media.set(e),$("#modalMedia").modal("hide")),!1}),$(document).on("submit","#modalMedia form",function(e){e.preventDefault();var t=$("#modalMedia form"),n=new FormData(t.get(0));$.ajax({url:$(this).attr("action"),type:"POST",data:n,contentType:!1,cache:!1,processData:!1,success:function(e){$("#modalMedia .modal-body").html(e)},error:function(e,t,n){console.log(e),console.log(t),console.log(n)}})}),$(document).on("click",".btn-media-select",function(e){piranha.media.init($(this)),piranha.media.load($(e.relatedTarget),""),piranha.media.show()}),$(document).on("click",".btn-media-clear",function(){piranha.media.init($(this)),piranha.media.remove($(this))}),$(".modal").on("shown.bs.modal",function(e){$(this).find("input[autofocus]").focus()}),$("#modalMedia").on("show.bs.modal",function(e){piranha.media.init($(e.relatedTarget)),piranha.media.initCallback&&(piranha.media.initCallback(),piranha.media.initCallback=null),piranha.media.load($(e.relatedTarget),"")}),$("#modalImgPreview").on("show.bs.modal",function(e){var t=$(e.relatedTarget),n=t.data("filename"),a=t.data("url"),r=t.data("contenttype"),i=t.data("filesize"),o=t.data("modified"),l=t.data("id"),d=t.data("parentid"),s=$(this);s.find(".modal-title").text(n),s.find("#btnDownload").attr("href",a),s.find("#previewContentType").text(r),s.find("#previewFilesize").text(i),s.find("#previewModified").text(o),s.find("#previewId").val(l),s.find("#previewParentId").val(d),l&&""!=l?s.find(".fileinput").show():s.find(".fileinput").hide(),r.startsWith("image")?(s.find("#previewImage").show(),s.find("#previewVideo").hide(),s.find("#imgPreview").attr("alt",n),s.find("#imgPreview").attr("src",a)):r.startsWith("video")&&(s.find("#previewImage").hide(),s.find("#previewVideo").show(),s.find("video").attr("src",a),s.find("video").attr("type",r))}),"undefined"==typeof piranha&&(piranha={}),piranha.tools=new function(){"use strict";this.isEmpty=function(e){return""==$(e).text().replace(/\s/g,"")&&0==$(e).find("img").length}},$(function(){$('[data-toggle="popover"]').popover({trigger:"hover"}),$('[data-toggle="tooltip"]').tooltip(),$(".panel-close").click(function(e){e.preventDefault(),$(this).closest(".panel").removeClass("active")}),$(".btn-panel-settings").click(function(e){e.preventDefault(),$(".panel-settings").toggleClass("active")}),$(".btn-panel-region").click(function(e){e.preventDefault(),console.log($($(this).data("id"))),$($(this).data("id")).toggleClass("active")}),$(".notification").each(function(){var e=$(this);setTimeout(function(){e.addClass("visible"),setTimeout(function(){e.removeClass("visible")},2500)},200)}),$("form").submit(function(e){return $(".editor-area").each(function(){$("#"+$(this).attr("data-id")).val($(this).html())}),!0})});